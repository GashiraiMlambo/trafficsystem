<div
  class="app-container"
  [class.sidebar-collapsed]="isSidebarCollapsed()"
  [class.mobile-sidebar-open]="isMobileSidebarOpen()"
>
  <!-- Global Loading Overlay -->
  @if (isLoading()) {
    <div class="loading-overlay">
      <div class="spinner"></div>
      <p class="text-white">Loading data...</p>
    </div>
  }

  <!-- Mobile Sidebar Overlay Backdrop -->
  @if (isMobileSidebarOpen()) {
    <div class="mobile-sidebar-backdrop" (click)="closeMobileSidebar()"></div>
  }

  <!-- Sidebar Component -->
  <app-sidebar
    [isCollapsed]="isSidebarCollapsed"
    [isMobileOpen]="isMobileSidebarOpen"
    (toggleSidebar)="toggleSidebar()"
    (closeMobile)="closeMobileSidebar()"
  />

  <div class="main-content-wrapper">
    <!-- Header Component -->
    <app-header
      [isSidebarCollapsed]="isSidebarCollapsed()"
      (toggleSidebar)="toggleSidebar()"
      [isMobileMenuOpen]="isMobileSidebarOpen()"
    />

    <!-- Main Content Area -->
    <main class="router-content" role="main" aria-label="Main application content">
      <router-outlet></router-outlet>
    </main>
  </div>

  <!-- Toast Notification Container -->
  <div class="toast-container" aria-live="polite" aria-atomic="true">
    @for (toast of toasts(); track toast.id) {
      <div [class]="'toast ' + toast.type" role="alert" aria-live="assertive">
        <div class="toast-header">
          <strong class="me-auto">{{ toast.title }}</strong>
          <small>{{ toast.timestamp | date : 'shortTime' }}</small>
          <button
            type="button"
            class="btn-close"
            aria-label="Close"
            (click)="removeToast(toast.id)"
          ></button>
        </div>
        <div class="toast-body">{{ toast.message }}</div>
      </div>
    }
  </div>
</div>
